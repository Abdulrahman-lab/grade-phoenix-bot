"""
๐ Message Templates
"""
from config import CONFIG
from storage.models import Base, DatabaseManager

def get_welcome_message(fullname: str | None = None) -> str:
    """Returns a simple, user-friendly welcome message explaining what the bot does."""
    name_line = f"ุฃููุงู {fullname}!\n\n" if fullname else "ูุฑุญุจุงู ุจู! ๐\n\n"
    
    return (
        name_line
        + "๐ **ูุง ูู ูุฐุง ุงูุจูุชุ**\n"
        + "ูุฐุง ุงูุจูุช ูุณุงุนุฏู ูู ูุชุงุจุนุฉ ุฏุฑุฌุงุชู ุงูุฌุงูุนูุฉ ุจุณูููุฉ!\n\n"
        + "โจ **ูุงุฐุง ููููู ุฃู ุชูุนูุ**\n"
        + "โข ๐ ุนุฑุถ ุฏุฑุฌุงุชู ุงูุญุงููุฉ\n"
        + "โข ๐ ุงูุญุตูู ุนูู ุฅุดุนุงุฑุงุช ุนูุฏ ุชุญุฏูุซ ุงูุฏุฑุฌุงุช\n"
        + "โข ๐ฑ ุงุณุชุฎุฏุงู ูุงุฌูุฉ ุณููุฉ ูุจุณูุทุฉ\n\n"
        + "๐ **ููุจุฏุก:**\n"
        + "ุงุถุบุท ุนูู '๐ ุชุณุฌูู ุงูุฏุฎูู' ูุฃุฏุฎู ุจูุงูุงุชู ุงูุฌุงูุนูุฉ\n\n"
        + "๐ **ุงูุฃูุงู:**\n"
        + "ุจูุงูุงุชู ูุญููุฉ ููุดูุฑุฉ ุจุงููุงูู\n\n"
        + f"๐จโ๐ป ุงููุทูุฑ: {CONFIG['ADMIN_USERNAME']}\n"
        + f"๐ฑ ุงูุฅุตุฏุงุฑ: {CONFIG['BOT_VERSION']}"
    )

def get_simple_welcome_message() -> str:
    """Returns a very simple welcome message for new users."""
    return (
        "ูุฑุญุจุงู! ๐\n\n"
        + "๐ **ุจูุช ูุชุงุจุนุฉ ุงูุฏุฑุฌุงุช ุงูุฌุงูุนูุฉ**\n\n"
        + "**ูุงุฐุง ููุนู ุงูุจูุชุ**\n"
        + "โข ูุนุฑุถ ุฏุฑุฌุงุชู ุงูุฌุงูุนูุฉ\n"
        + "โข ูุฎุจุฑู ุนูุฏ ุชุญุฏูุซ ุงูุฏุฑุฌุงุช\n"
        + "โข ุณูู ุงูุงุณุชุฎุฏุงู\n\n"
        + "**ููู ุชุจุฏุฃุ**\n"
        + "ุงุถุบุท '๐ ุชุณุฌูู ุงูุฏุฎูู' ูุฃุฏุฎู ุจูุงูุงุชู ุงูุฌุงูุนูุฉ\n\n"
        + "๐ ุจูุงูุงุชู ุขููุฉ ููุดูุฑุฉ\n"
        + f"๐จโ๐ป ูููุณุงุนุฏุฉ: {CONFIG['ADMIN_USERNAME']}"
    )

def get_security_welcome_message() -> str:
    """Returns a security-focused welcome message for returning users."""
    return (
        "ูุฑุญุจุงู ุจุนูุฏุชู! ๐\n\n"
        + "โ **ุญุงูุฉ ุงูุฃูุงู:** ููุชุงุฒุฉ\n"
        + "๐ **ุญูุงูุฉ ุงูุจูุงูุงุช:** ูุดูุฑุฉ\n"
        + "๐ก๏ธ **ูุนุงููุฑ ุงูุฃูุงู:** OWASP + NIST\n\n"
        + "**ุงูุฃูุงูุฑ ุงูุฃูููุฉ:**\n"
        + "๐ `/security_info` - ูุนูููุงุช ุงูุฃูุงู\n"
        + "๐ `/security_audit` - ุชูุฑูุฑ ุงูุฃูุงู\n"
        + "๐ `/privacy_policy` - ุณูุงุณุฉ ุงูุฎุตูุตูุฉ\n\n"
        + "๐ก ุงุณุชุฎุฏู ุงูุฃุฒุฑุงุฑ ุฃุฏูุงู ูููุตูู ููููุฒุงุช"
    )

def get_help_message() -> str:
    """ุฏุงูุฉ ุชุฑุฌุน ุฑุณุงูุฉ ุงููุณุงุนุฏุฉ."""
    return (
        "ุงุณุชุฎุฏู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ ููุชููู ุจูู ุงูููุฒุงุช.\n\n"
        "โข ุชุณุฌูู ุงูุฏุฎูู: ูุฅุฏุฎุงู ุจูุงูุงุชู ุงูุฌุงูุนูุฉ\n"
        "โข ุนุฑุถ ุงูุฏุฑุฌุงุช: ููุงุทูุงุน ุนูู ูุชุงุฆุฌู\n"
        "โข ุงูุฅุนุฏุงุฏุงุช: ูุชุฎุตูุต ุชุฌุฑุจุชู\n\n"
        f"ูููุณุงุนุฏุฉ: {CONFIG['ADMIN_USERNAME']}\n"
        f"ุงูุฅุตุฏุงุฑ: {CONFIG['BOT_VERSION']}\n"
        "THE DIE IS CAST"
    )

def get_error_message(error_type: str = "ุนุงู") -> str:
    """ุฏุงูุฉ ุชุฑุฌุน ุฑุณุงูุฉ ุงูุฎุทุฃ."""
    error_messages = {
        "login_failed": "ุชุนุฐูุฑ ุชุณุฌูู ุงูุฏุฎูู. ูุฑุฌู ุงูุชุฃูุฏ ูู ุตุญุฉ ุงูุจูุงูุงุช.",
        "network_error": "ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงู. ูุฑุฌู ุงููุญุงููุฉ ูุงุญููุง.",
        "api_error": "ุงููุธุงู ุบูุฑ ูุชุงุญ ุญุงูููุง. ุญุงูู ูุงุญููุง.",
        "token_expired": "ุงูุชูุช ุงูุฌูุณุฉ. ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูุฌุฏุฏูุง.",
        "no_grades": "ูุง ุชูุฌุฏ ุฏุฑุฌุงุช ูุชุงุญุฉ ุญุงูููุง.",
        "general": "ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน. ูุฑุฌู ุงููุญุงููุฉ ูุงุญููุง."
    }
    return error_messages.get(error_type, error_messages["general"])

def get_success_message(action: str) -> str:
    """ุฏุงูุฉ ุชุฑุฌุน ุฑุณุงูุฉ ุงููุฌุงุญ."""
    success_messages = {
        "login": "โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ!\n\nููููู ุงูุขู ูุญุต ุฏุฑุฌุงุชู ูุงุณุชูุงู ุงูุฅุดุนุงุฑุงุช.",
        "grades_updated": "๐ ุชู ุชุญุฏูุซ ุงูุฏุฑุฌุงุช ุจูุฌุงุญ!\n\nุชู ูุญุต ุฏุฑุฌุงุชู ูุชุญุฏูุซูุง.",
        "settings_saved": "โ๏ธ ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ!\n\nุชู ุชุญุฏูุซ ุฅุนุฏุงุฏุงุชู.",
        "profile_updated": "๐ค ุชู ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู ุจูุฌุงุญ!\n\nุชู ุชุญุฏูุซ ูุนูููุงุชู ุงูุดุฎุตูุฉ."
    }
    
    return success_messages.get(action, "โ ุชู ุชูููุฐ ุงูุนูููุฉ ุจูุฌุงุญ!")

def get_info_message(info_type: str) -> str:
    """ุฏุงูุฉ ุชุฑุฌุน ุฑุณุงูุฉ ุงููุนูููุงุช."""
    info_messages = {
        "not_registered": "โ ูู ูุชู ุชุณุฌููู ุจุนุฏ.\n\nุงุถุบุท ุนูู '๐ ุชุณุฌูู ุงูุฏุฎูู' ุฃููุงู ูุฅุฏุฎุงู ุจูุงูุงุชู ุงูุฌุงูุนูุฉ.",
        "no_permission": "๐ซ ููุณ ูุฏูู ุตูุงุญูุฉ ุงููุตูู ููุฐู ุงูููุฒุฉ.",
        "maintenance": "๐ง ุงูุจูุช ูู ุงูุตูุงูุฉ ุญุงูููุง. ูุฑุฌู ุงููุญุงููุฉ ูุงุญููุง ุฃู ุงูุชูุงุตู ูุน ุงูุฏุนู.",
        "coming_soon": "๐ง ูุฑูุจูุง: ูุฐู ุงูููุฒุฉ ุณุชุชููุฑ ูุงุญููุง."
    }
    
    return info_messages.get(info_type, "โน๏ธ ูุนูููุงุช") 

def get_registration_success_message(username: str) -> str:
    """ุฏุงูุฉ ุชุฑุฌุน ุฑุณุงูุฉ ูุฌุงุญ ุชุณุฌูู ุงูุฏุฎูู."""
    return (
        f"ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ.\n\n"
        f"ูุฑุญุจุงู {username}.\n\n"
        f"ููููู ุงูุขู ูุชุงุจุนุฉ ุฏุฑุฌุงุชู ูู ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูุฌุงูุนูุฉ.\n\n"
        f"THE DIE IS CAST"
    ) 

def get_credentials_security_info_message() -> str:
    """Returns a security info message shown when asking for credentials."""
    return (
        "๐ ููุงุฐุง ูุทูุจ ุจูุงูุงุชู ุงูุฌุงูุนูุฉุ\n"
        "ูุญุชุงุฌ ุฅูู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ ููุท ูุชุณุฌูู ุงูุฏุฎูู ุฅูู ูุธุงู ุงูุฌุงูุนุฉ ูุฌูุจ ุฏุฑุฌุงุชู. "
        "ูุง ูููู ุจุชุฎุฒูู ูููุฉ ุงููุฑูุฑุ ููุชู ุญุฐููุง ููุฑุงู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู. ุจูุงูุงุชู ูุดูุฑุฉ ูุขููุฉุ ูููููู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ูู ุฃู ููุช ูู ุจูุงุจุฉ ุงูุฌุงูุนุฉ.\n\n"
        "ููุฃูุงู ุงููุงููุ ููุตุญ ุจุงุณุชุฎุฏุงู ูููุฉ ูุฑูุฑ ุฎุงุตุฉ ููุฐุง ุงูุญุณุงุจ ูุนุฏู ูุดุงุฑูุชูุง ูุน ุฃู ุฎุฏูุฉ ุฃุฎุฑู."
    )

db_manager = DatabaseManager(CONFIG["DATABASE_URL"])
Base.metadata.create_all(bind=db_manager.engine) 